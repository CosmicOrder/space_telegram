# Космический Телеграм

Данный набор скриптов скачивает фотографии космоса с API SpaceX и API Nasa и публикует 
их в телеграм канале.

## Как установить

Скачайте код.

Создайте виртуальное окружение:

```
python3 -m venv venv
```

Активируйте виртуальное окружение:

- для Windows:
    ```
    venv\Scripts\activate 
    ```
- для Linux:
    ```
    source venv/bin/activate 
    ```

Установите зависимости командой:

```
pip install -r requirements.txt
```

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить,
создайте файл `.env` в корне проекта и запишите туда данные в таком
формате: `ПЕРЕМЕННАЯ=значение`.

Доступны следующие переменные:

- `NASA_API_KEY` — токен, который необходим для взаимодействия с API Nasa 
- `TG_BOT_TOKEN` — токен, который необходим для управления телеграм-ботом через API

## Парсинг фотографий

Чтобы запустить скрипт для скачивания фото запуска SpaceX:
```
python fetch_spacex_images.py
```
Для установки дополнительных параметров скачивания, используются следующие 
аргументы командной строки:
- --id - идентификационный номер полёта, если значение не указано скачиваются 
фото последнего полёта (если они есть) 
___

Чтобы запустить скрипт для скачивания EPIC-фото от NASA:
```
python fetch_epic_images.py
```
Для установки дополнительных параметров скачивания, используются следующие 
аргументы командной строки:
- --number_of_photos - кол-во фото для скачивания (по-умолчанию 5)
___

Чтобы запустить скрипт для скачивания APOD-фото от NASA:
```
python fetch_apod_images.py
```
Для установки дополнительных параметров скачивания, используются следующие 
аргументы командной строки:
- --start_date - начальная дата для скачивания фотографии дня (по умолчанию 2022-01-01)
- --end_date - конечная дата для скачивания фотографии дня(по умолчанию 2022-01-05)

В результате, если вы всё сделали правильно, в корне проекта появятся новые
папки с фотографиями космоса. 

## Публикация фотографий в телеграм-канале
С помощью следующих скриптов скаченные картинки можно будет опубликовать
в вашему телеграм-канале.

Чтобы опубликовать отдельную фотографию в телеграм-канале запускаем скрипт:
```
python publish_photo_in_the_channel.py
```
Если дополнительные параметры не указаны, то публикуется случайная фотография.

Чтобы публиковалась конкретная фотография, нужно указать следующий аргумент 
командной строки:
- --photo - название фотографии, которую необходимо опубликовать
___
Чтобы опубликовать все фотографии из директории в телеграм-канале запускаем 
скрипт:
```
python publish_photos_in_the_channel.py
```
Для установки дополнительных параметров скачивания, используются следующие 
аргументы командной строки:
- --frequency - частота публикации фотографий (в часах). По умолчанию: каждые 4 часа
- --img_per_msg - количество фотографий в одном сообщении. По умолчанию: 5 фотографий

По умолчания публикация происходит каждые 4 часа. 

В результате, если вы всё сделали правильно, в телеграм-канале будут опубликованы
фотографии из директории.

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для
веб-разработчиков [dvmn.org](https://dvmn.org/).